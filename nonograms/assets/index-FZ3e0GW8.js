(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(l){if(l.ep)return;l.ep=!0;const n=s(l);fetch(l.href,n)}})();const E=[[0,1,1,1,0],[1,1,0,1,1],[1,1,1,1,1],[0,1,1,1,0],[0,0,1,0,0]],B=[[0,1,1,1,0],[0,1,1,1,0],[0,1,1,1,0],[0,1,1,1,0],[1,1,1,1,1]],k=[[0,0,1,0,0],[0,1,0,1,0],[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1]],D=[[1,0,1,0,1],[1,1,1,1,1],[0,1,1,1,0],[0,1,1,1,0],[1,1,1,1,1]],O=[[0,1,0,0,0],[1,1,1,0,1],[1,1,1,1,0],[1,0,1,0,0],[1,0,1,0,0]],z=[[1,1,1,1,1,1,0,0,0,0],[0,1,1,1,1,1,0,0,1,1],[0,0,1,1,1,1,1,0,1,0],[0,0,0,0,0,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,0,0,1,1,1],[0,1,1,1,1,0,0,1,1,1],[0,0,1,1,1,0,0,0,1,1],[0,0,0,1,1,0,0,0,0,1]],H=[[1,0,0,0,1,0,0,0,0,1],[1,1,1,1,1,0,0,0,0,1],[1,0,1,0,1,0,0,0,0,1],[1,1,1,1,1,0,0,0,0,1],[0,1,1,1,1,1,1,1,0,1],[0,0,1,1,1,1,1,1,1,1],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,0],[0,0,1,1,0,0,0,1,1,0],[0,1,1,1,0,0,1,1,1,0]],V=[[0,0,1,0,0,1,0,0,1,0],[0,0,1,1,0,1,0,1,0,0],[0,0,0,0,1,1,1,1,1,0],[0,0,0,0,0,0,0,1,1,1],[1,0,0,0,0,0,1,1,0,0],[0,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,0,0],[0,0,1,1,0,0,1,1,1,0],[0,1,1,0,0,0,0,0,1,0],[0,1,0,0,0,0,0,1,0,0]],_=[[0,0,1,1,1,0,0,0,0,0],[0,0,1,0,1,1,0,0,0,0],[1,1,1,1,1,1,0,0,0,0],[0,0,0,1,1,0,0,0,0,0],[0,0,1,1,0,0,0,0,1,0],[0,1,1,1,1,1,1,1,1,1],[1,1,0,0,0,1,1,1,1,1],[1,1,1,1,0,0,1,1,1,0],[0,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,0,0,0]],R=[[0,0,0,0,1,0,0,0,0,0],[0,0,0,1,1,1,0,0,0,0],[0,0,1,1,1,1,1,0,0,0],[0,1,1,1,0,1,1,1,0,0],[1,1,1,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,1,1,1],[1,1,0,0,1,1,0,0,1,0],[1,1,0,0,1,1,0,0,1,0],[1,1,0,0,1,1,1,1,1,0],[1,1,0,0,1,1,1,1,1,0]],P=[[0,1,1,1,0,0,0,0,0,0],[1,1,1,0,0,1,0,0,1,0],[1,0,1,0,0,0,0,0,0,0],[1,1,1,0,0,1,1,1,1,0],[1,0,1,1,0,0,0,0,0,0],[1,1,1,1,1,0,0,0,0,1],[0,1,1,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0],[0,1,0,0,0,0,0,0,0,0]],U=[[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0],[0,0,0,0,0,0,1,1,1,1,1,0,0,0,1],[0,0,0,0,1,1,1,1,1,1,1,0,1,1,1],[0,0,1,0,0,1,1,1,1,1,0,1,1,0,1],[0,1,1,1,0,0,1,1,1,1,1,1,0,0,1],[0,0,1,0,0,0,0,1,1,1,1,0,0,0,1],[0,0,1,0,0,0,0,1,0,0,1,1,0,0,1],[0,1,0,0,0,1,1,1,1,0,0,1,0,0,1],[1,1,1,0,1,1,1,1,0,0,1,1,0,0,1],[0,1,0,0,1,1,0,0,0,1,1,1,0,0,1],[0,1,0,1,0,0,0,1,1,1,1,1,0,1,0],[0,0,1,0,0,0,0,1,1,1,1,1,0,0,0],[0,1,0,0,0,1,1,1,1,1,1,1,1,0,0],[1,0,0,0,0,1,1,1,1,1,1,1,1,1,0],[0,0,0,0,1,1,1,1,1,1,1,1,1,1,0]],$=[[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,1,1,0,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,1,0,0,0,0,0,0,0],[0,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[1,0,0,1,1,1,1,1,1,1,0,0,0,0,0],[1,0,0,1,0,0,0,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,1,1,1,0,1,1,0],[0,0,0,0,0,0,0,0,1,1,1,0,1,1,1],[1,1,1,1,1,1,0,0,0,1,1,0,0,1,1],[0,1,0,0,1,0,0,0,0,0,1,1,0,0,1],[1,1,1,1,1,1,1,1,0,0,0,1,0,0,0],[0,1,0,0,1,0,0,1,0,0,0,1,0,0,0]],F=[[0,0,0,0,0,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,0,0,0,0,0,0,0],[0,1,1,0,1,1,1,1,0,0,0,0,0,0,0],[1,1,0,1,0,1,1,0,0,0,0,0,0,0,0],[1,1,1,1,0,0,0,0,0,0,0,0,0,0,0],[0,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,1,1,1,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,1,1,1],[0,0,1,0,1,0,1,0,1,1,0,1,1,0,0],[0,0,1,1,1,0,1,0,1,1,1,1,1,1,0],[0,0,0,1,1,1,1,0,1,1,0,1,1,1,1],[0,0,0,0,0,1,1,1,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,0,0,0,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1]],W=[[1,1,1,1,1,1,0,0,0,0,0,0,1,1,1],[1,1,1,1,1,0,1,1,1,1,1,0,0,0,1],[1,1,1,1,0,1,1,1,1,1,1,1,1,0,0],[1,1,1,0,0,1,1,1,1,1,1,1,1,1,0],[1,1,1,0,0,0,1,1,1,1,1,1,1,1,1],[1,1,0,1,1,0,0,0,0,0,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,1,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,1,0,0,1,1,1,1],[1,0,0,0,1,1,0,0,1,1,1,1,1,1,0],[1,1,1,1,1,1,1,0,0,1,1,1,1,0,0],[1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,0,0,0,0,0,0,0]],X=[[0,0,0,0,0,0,0,0,0,0,0,1,1,0,0],[0,0,0,0,0,1,1,0,0,0,1,0,0,1,0],[0,0,0,0,0,0,1,1,1,0,1,0,0,1,0],[0,0,0,1,0,0,0,0,1,1,1,1,1,0,0],[0,0,1,1,0,0,0,0,1,1,1,0,0,0,0],[0,1,1,0,0,0,0,0,1,1,1,1,1,0,0],[1,1,1,0,0,0,0,1,1,1,1,1,1,1,0],[1,1,1,0,0,0,1,1,1,1,0,0,0,1,1],[1,1,1,1,0,1,1,1,1,0,0,0,0,0,1],[0,1,1,1,1,1,1,1,1,0,0,0,0,0,0],[0,0,1,1,1,1,1,1,0,0,0,0,0,0,0],[0,0,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,1,0,0,0,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,0,0,0],[0,0,1,1,0,0,1,1,1,1,1,0,0,0,0]],g=[{id:1,level:"easy",name:"Location mark",figure:[...E]},{id:2,level:"easy",name:"Top hat",figure:[...B]},{id:3,level:"easy",name:"Celtic cross",figure:[...k]},{id:4,level:"easy",name:"Tower",figure:[...D]},{id:5,level:"easy",name:"Camel",figure:[...O]},{id:6,level:"medium",name:"Bird",figure:[...z]},{id:7,level:"medium",name:"Cat",figure:[...H]},{id:8,level:"medium",name:"Deer",figure:[...V]},{id:9,level:"medium",name:"Duck",figure:[..._]},{id:10,level:"medium",name:"House",figure:[...R]},{id:11,level:"medium",name:"Snowman",figure:[...P]},{id:12,level:"hard",name:"Death",figure:[...U]},{id:13,level:"hard",name:"Horse",figure:[...$]},{id:14,level:"hard",name:"Fish",figure:[...F]},{id:15,level:"hard",name:"Ram",figure:[...W]},{id:16,level:"hard",name:"Anchor",figure:[...X]}];function j(t){return g.filter(s=>s.level===t)}function q(t){return g.filter(s=>s.name===t)}function J(t){return g.filter(s=>s.id===t)[0]}function K(t){localStorage.setItem("n-n-theme",t)}function Y(){return localStorage.getItem("n-n-theme")}function Q(t){localStorage.setItem("n-n-volume",t)}function Z(){return localStorage.getItem("n-n-volume")}function ee(t){localStorage.setItem("n-n-game",JSON.stringify(t))}function N(){const t=localStorage.getItem("n-n-game");return JSON.parse(t)}function M(){const t=localStorage.getItem("n-n-win");return t?JSON.parse(t):[]}function te(t){let s=[...M(),t];s.length>5&&(s=s.slice(1)),localStorage.setItem("n-n-win",JSON.stringify(s))}function se(t){t.length&&localStorage.setItem("n-n-passed",JSON.stringify(t))}function ie(){const t=localStorage.getItem("n-n-passed");return t?JSON.parse(t):[]}function o(t,e,s){const i=document.createElement(t);return i.className=e,s&&s.append(i),i}class a{constructor(e,s){this.tag=e,this.el=null,this.className=s}create(){this.el=o(this.tag,this.className)}}function le(t){return t==="dark"}function ne(t){return t==="silent"}function re(){let t=M();return t=t.sort((e,s)=>e.timer-s.timer),t}function oe(){return{card:null,lvl:null,timer:null}}function ce(t){const e=[...t];if(e.length<5){let i=e.length;for(;i<5;)e.push(oe()),i+=1}return e}function ae(t){let e=null;if(t){const s=new Date(1970,0,0,0,0,+t||0).toLocaleTimeString("ru");s.toString().slice(0,2)==="00"?e=s.toString().slice(3):e=s}return e}const he=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-crosshair" viewBox="0 0 16 16">
<path d="M8.5.5a.5.5 0 0 0-1 0v.518A7 7 0 0 0 1.018 7.5H.5a.5.5 0 0 0 0 1h.518A7 7 0 0 0 7.5 14.982v.518a.5.5 0 0 0 1 0v-.518A7 7 0 0 0 14.982 8.5h.518a.5.5 0 0 0 0-1h-.518A7 7 0 0 0 8.5 1.018zm-6.48 7A6 6 0 0 1 7.5 2.02v.48a.5.5 0 0 0 1 0v-.48a6 6 0 0 1 5.48 5.48h-.48a.5.5 0 0 0 0 1h.48a6 6 0 0 1-5.48 5.48v-.48a.5.5 0 0 0-1 0v.48A6 6 0 0 1 2.02 8.5h.48a.5.5 0 0 0 0-1zM8 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4"/>
</svg>`,ue=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
<path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
<path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
</svg>`,me=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle" viewBox="0 0 16 16">
<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
<path d="m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05"/>
</svg>`,de=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
<path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"/>
<path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"/>
</svg>`,ge=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-droplet-fill" viewBox="0 0 16 16">
<path d="M8 16a6 6 0 0 0 6-6c0-1.655-1.122-2.904-2.432-4.362C10.254 4.176 8.75 2.503 8 0c0 0-6 5.686-6 10a6 6 0 0 0 6 6M6.646 4.646l.708.708c-.29.29-1.128 1.311-1.907 2.87l-.894-.448c.82-1.641 1.717-2.753 2.093-3.13"/>
</svg>`,ve=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-droplet-half" viewBox="0 0 16 16">
<path fill-rule="evenodd" d="M7.21.8C7.69.295 8 0 8 0q.164.544.371 1.038c.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8m.413 1.021A31 31 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10c0 0 2.5 1.5 5 .5s5-.5 5-.5c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"/>
<path fill-rule="evenodd" d="M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87z"/>
</svg>`,pe=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-droplet" viewBox="0 0 16 16">
<path fill-rule="evenodd" d="M7.21.8C7.69.295 8 0 8 0q.164.544.371 1.038c.812 1.946 2.073 3.35 3.197 4.6C12.878 7.096 14 8.345 14 10a6 6 0 0 1-12 0C2 6.668 5.58 2.517 7.21.8m.413 1.021A31 31 0 0 0 5.794 3.99c-.726.95-1.436 2.008-1.96 3.07C3.304 8.133 3 9.138 3 10a5 5 0 0 0 10 0c0-1.201-.796-2.157-2.181-3.7l-.03-.032C9.75 5.11 8.5 3.72 7.623 1.82z"/>
<path fill-rule="evenodd" d="M4.553 7.776c.82-1.641 1.717-2.753 2.093-3.13l.708.708c-.29.29-1.128 1.311-1.907 2.87z"/>
</svg>`,fe=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-floppy" viewBox="0 0 16 16">
<path d="M11 2H9v3h2z"/>
<path d="M1.5 0h11.586a1.5 1.5 0 0 1 1.06.44l1.415 1.414A1.5 1.5 0 0 1 16 2.914V14.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 14.5v-13A1.5 1.5 0 0 1 1.5 0M1 1.5v13a.5.5 0 0 0 .5.5H2v-4.5A1.5 1.5 0 0 1 3.5 9h9a1.5 1.5 0 0 1 1.5 1.5V15h.5a.5.5 0 0 0 .5-.5V2.914a.5.5 0 0 0-.146-.353l-1.415-1.415A.5.5 0 0 0 13.086 1H13v4.5A1.5 1.5 0 0 1 11.5 7h-7A1.5 1.5 0 0 1 3 5.5V1H1.5a.5.5 0 0 0-.5.5m3 4a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5V1H4zM3 15h10v-4.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5z"/>
</svg>`,be=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">
<path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/>
<path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"/>
</svg>`,we=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
<path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
<path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
</svg>`,Le=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-counterclockwise" viewBox="0 0 16 16">
<path fill-rule="evenodd" d="M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"/>
<path d="M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"/>
</svg>`,Se=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shuffle" viewBox="0 0 16 16">
<path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.6 9.6 0 0 0 7.556 8a9.6 9.6 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.6 10.6 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.6 9.6 0 0 0 6.444 8a9.6 9.6 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5"/>
<path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192m0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192"/>
</svg>`,Ae=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-up" viewBox="0 0 16 16">
<path d="M11.536 14.01A8.47 8.47 0 0 0 14.026 8a8.47 8.47 0 0 0-2.49-6.01l-.708.707A7.48 7.48 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303z"/>
<path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.48 5.48 0 0 1 11.025 8a5.48 5.48 0 0 1-1.61 3.89z"/>
<path d="M10.025 8a4.5 4.5 0 0 1-1.318 3.182L8 10.475A3.5 3.5 0 0 0 9.025 8c0-.966-.392-1.841-1.025-2.475l.707-.707A4.5 4.5 0 0 1 10.025 8M7 4a.5.5 0 0 0-.812-.39L3.825 5.5H1.5A.5.5 0 0 0 1 6v4a.5.5 0 0 0 .5.5h2.325l2.363 1.89A.5.5 0 0 0 7 12zM4.312 6.39 6 5.04v5.92L4.312 9.61A.5.5 0 0 0 4 9.5H2v-3h2a.5.5 0 0 0 .312-.11"/>
</svg>`,Ce=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-mute" viewBox="0 0 16 16">
<path d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06M6 5.04 4.312 6.39A.5.5 0 0 1 4 6.5H2v3h2a.5.5 0 0 1 .312.11L6 10.96zm7.854.606a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0"/>
</svg>`,xe=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-moon" viewBox="0 0 16 16">
<path d="M6 .278a.77.77 0 0 1 .08.858 7.2 7.2 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277q.792-.001 1.533-.16a.79.79 0 0 1 .81.316.73.73 0 0 1-.031.893A8.35 8.35 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.75.75 0 0 1 6 .278M4.858 1.311A7.27 7.27 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.32 7.32 0 0 0 5.205-2.162q-.506.063-1.029.063c-4.61 0-8.343-3.714-8.343-8.29 0-1.167.242-2.278.681-3.286"/>
</svg>`,Te=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-brightness-high" viewBox="0 0 16 16">
<path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"/>
</svg>`,ye=`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-star" viewBox="0 0 16 16">
<path d="M7.84 4.1a.178.178 0 0 1 .32 0l.634 1.285a.18.18 0 0 0 .134.098l1.42.206c.145.021.204.2.098.303L9.42 6.993a.18.18 0 0 0-.051.158l.242 1.414a.178.178 0 0 1-.258.187l-1.27-.668a.18.18 0 0 0-.165 0l-1.27.668a.178.178 0 0 1-.257-.187l.242-1.414a.18.18 0 0 0-.05-.158l-1.03-1.001a.178.178 0 0 1 .098-.303l1.42-.206a.18.18 0 0 0 .134-.098z"/>
<path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.777.416L8 13.101l-5.223 2.815A.5.5 0 0 1 2 15.5zm2-1a1 1 0 0 0-1 1v12.566l4.723-2.482a.5.5 0 0 1 .554 0L13 14.566V2a1 1 0 0 0-1-1z"/>
</svg>`;var Ne={BASE_URL:"https://naya252.github.io/rs-nonograms/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{BASE_URL:m}=Ne,Me=`${m}sounds/fill.mp3`,Ge=`${m}sounds/clean.wav`,Ie=`${m}sounds/x.wav`,Ee=`${m}sounds/click.wav`,Be=`${m}sounds/modal.wav`,ke=`${m}sounds/win.wav`,De=he,Oe=ue,ze=me,He=de,Ve=ge,_e=ve,Re=pe,Pe=fe,Ue=be,$e=we,Fe=Le,We=Se,Xe=Ae,je=Ce,qe=xe,Je=Te,Ke=ye;function L(t){if(!t){const e=new Audio(Me);e.volume=.3,e.play()}}function S(t){if(!t){const e=new Audio(Ge);e.volume=.3,e.play()}}function A(t){if(!t){const e=new Audio(Ie);e.volume=.2,e.play()}}function h(t,e){if(!t&&e){const s=new Audio(Ee);s.volume=.8,s.play()}}function G(t){if(!t){const e=new Audio(Be);e.volume=.8,e.play()}}function Ye(t){if(!t){const e=new Audio(ke);e.volume=.3,e.play()}}function Qe(t){const e=t.changeVolume();let s="silent";e?s="silent":s="loud",Q(s)}function Ze(t){const e=t.changeTheme();let s="dark";return e?s="dark":s="light",K(s),s}function et(t){const e=Z();e?t.settings.volume.isSilent=ne(e):t.settings.volume.isSilent=!1,t.settings.createSettings(),t.top.collapse.el.append(t.settings.score.el),t.settings.score.el.addEventListener("click",()=>{t.showScore(),h(t.settings.volume.isSilent,t.isLoad)}),t.top.collapse.el.append(t.settings.theme.el),t.settings.theme.el.addEventListener("click",()=>{const s=Ze(t.settings);t.body.changeDataTheme(s),h(t.settings.volume.isSilent,t.isLoad)}),t.top.collapse.el.append(t.settings.volume.el),t.settings.volume.el.addEventListener("click",()=>{Qe(t.settings),h(t.settings.volume.isSilent,t.isLoad)})}function tt(t,e){const s=t.target.closest(".cls"),i=t.target.closest(".sbmt"),l=e.modal.cancelBtn.classList.contains("invisible"),n=e.modal.el.getAttribute("data-type");(s||i&&l||i&&!l)&&(h(e.settings.volume.isSilent,e.isLoad),i&&!l?e.callActions("sbmt",n):e.callActions("cancel",n),n==="score"&&(e.close(),e.modal.scoreBody.remove(),e.modal.scoreBody=null,e.modal.createBody(),e.tmr.timer.isStart&&e.cancelTimerPause()))}function st(t,e,s){s.modal.el||(s.modal.create(),s.modal.el.addEventListener("click",i=>{s.closeModal(i)})),t!=="win"&&G(s.settings.volume.isSilent),e&&t==="score"&&ce(e).forEach((l,n)=>{const r=ae(l.timer);s.modal.createRow({...l,num:n+1,timer:r})}),s.body.el.append(s.modal.backdrop),s.body.el.append(s.modal.el),setTimeout(()=>{s.tmr.pauseTimer(),s.body.el.classList.add("modal-open"),s.top.header.el.setAttribute("inert",!0),s.content.main.el.setAttribute("inert",!0),s.modal.open(t,s.tmr.timer.sec)},300)}function it(t){t.modal.close(),t.body.el.classList.remove("modal-open"),t.top.header.el.removeAttribute("inert"),t.content.main.el.removeAttribute("inert"),t.body.el.lastChild.remove(),t.body.el.lastChild.remove()}function lt(t,e,s){if((e==="solution"||e==="reset"||e==="change")&&t==="cancel"&&(s.cancelTimerPause(),s.close()),e==="solution"&&t==="sbmt"&&(s.submitSolution(),s.close()),e==="reset"&&t==="sbmt"&&(s.submitResetGame(),s.close()),e==="change"&&t==="sbmt"&&(s.tmr.timer.isStart=!1,s.close(),s.changeGameEvt?s.changeGameEvt.target.classList.contains("scheme")?s.selectCurCard(s.changeGameEvt):s.changeGameEvt.target.parentNode.classList.contains("scheme")?s.selectCurCard(s.changeGameEvt.target.parentNode):s.selectCurLevel(s.changeGameEvt):(s.changeId(),h(s.settings.volume.isSilent,s.isLoad))),e==="win"){s.tmr.timer.isStart=!1,s.close();const i={lvl:s.lvl.curLevel.value,card:s.crd.curCard.value,timer:s.tmr.timer.sec,id:new Date};te(i),setTimeout(()=>{s.alert.addAlert("score"),G(s.settings.volume.isSilent)},300)}}function nt(t){ie().forEach(s=>t.changePassedGame(s))}function rt(t,e){e.passedGames.push(t),e.changeData(t),e.passedGames.length===16&&(e.passedGames=[],e.changeData(t),e.changePassedGame(t))}function ot(t){se(t.passedGames)}function ct(t){const e=Math.floor(Math.random()*t.randomData.length);t.randomId=t.randomData[e].id,t.changePassedGame(t.randomId);const s=J(t.randomId);t.getSpecLevel(s.level,s.name)}function at(t,e){e.randomData=e.randomData.filter(s=>s.id!==t),e.passedGames.length===16&&(e.randomData=[...g])}function ht(t){t.lvl.createLevels(),t.lvl.levels.el.addEventListener("click",e=>{var s;t.tmr.timer.isStart&&((s=e.target.closest(".level"))==null?void 0:s.getAttribute("id").toLowerCase())!==t.lvl.curLevel.value?(t.changeGameEvt=e,t.openModal("change")):(t.selectCurLevel(e),h(t.settings.volume.isSilent,t.isLoad))}),t.pageSize>767?t.controls.append(t.lvl.levels.el):t.top.nav.el.childNodes[3].childNodes[0].append(t.lvl.levels.el),t.selectSpecificLevel(t.lvl.levels.el.childNodes[0])}function ut(t,e,s){const i=s.lvl.levels.items.filter(l=>l.value===t);if(i[0].getAttribute("value")===s.lvl.curLevel.value){const l=s.crd.cards.items.filter(n=>n.value===e);s.selectSpecificCard(l[0])}else s.selectSpecificLevel(i[0],e)}function mt(t,e,s){s.lvl.selectCurLevel(t)&&(s.crd.cleanCards(),e?s.createCards(e):s.createCards())}function dt(t,e){e.lvl.selectCurLevel(t)&&(e.crd.cleanCards(),e.createCards())}function gt(t){const e=N();e?(t.getSpecLevel(e.lvl,e.card),t.createGrid(e.card,e.timer),t.fillSavedGame(e.grid,e.x)):t.alert.addAlert("noGame")}function vt(t,e){const s=j(e.lvl.curLevel.value);if(e.crd.createCards(s),e.crd.cards.el.addEventListener("click",i=>{e.tmr.timer.isStart&&(e.changeGameEvt=i,e.openModal("change")),e.tmr.timer.isStart||e.selectCurCard(i)}),e.pageSize>767?e.controls.append(e.crd.cards.el):e.top.nav.el.childNodes[3].childNodes[0].append(e.crd.cards.el),t){const i=e.crd.cards.items.filter(l=>l.value===t);e.selectSpecificCard(i[0])}else e.selectSpecificCard(e.crd.cards.el.childNodes[0])}function pt(t,e){e.crd.selectCurCard(t),e.createGrid()}function ft(t,e){e.crd.selectCurCard(t)&&(h(e.settings.volume.isSilent,e.isLoad),e.createGrid())}function bt(t,e,s){let i;if(t?i=q(t):i=s.crd.cards.data.filter(l=>l.name===s.crd.curCard.value),i.length){s.grd.cleanGrid(),s.grd.createGrid(i[0],s.lvl.curLevel.value),s.grd.grid.el.addEventListener("click",c=>s.selectCell(c)),s.grd.grid.el.addEventListener("contextmenu",c=>{c.preventDefault(),s.selectCell(c,!0)}),s.grd.grid.el.addEventListener("mouseover",c=>{s.grd.addHover(c)}),s.grd.grid.el.addEventListener("mouseout",c=>{s.grd.removeHover(c)});const l=o("div","wrap"),n=o("div","grid-wrap"),r=o("div","actions");n.append(s.grd.grid.el),l.append(n),l.append(r),s.wrap&&s.wrap.remove(),s.content.main.el.append(l),s.wrap=l,s.createTimer(e),s.createActions(),s.changeGameinfo()}}function wt(t,e,s){s.grd.points.cur=t,s.grd.points.x=e,s.grd.fillSavedCells()}function Lt(t,e,s){if(!s.grd.grid.el.classList.contains("lock")){const i=t.target.closest(".cell.game");if(i)if(s.tmr.timer.isStart||(s.tmr.timer.isStart=!0,s.tmr.startTimer(!0),s.actions.activateButtons()),t.type==="pointermove"&&t.pressure>0){if(s.cellTarget||(s.cellTarget=i),s.cellTarget!==i){const{isFill:l,isX:n,isWin:r}=s.grd.selectCell(t,e);l?L(s.settings.volume.isSilent):n?A(s.settings.volume.isSilent):S(s.settings.volume.isSilent),r&&s.winGame(),s.cellTarget=i}}else{const{isFill:l,isX:n,isWin:r}=s.grd.selectCell(t,e);l?L(s.settings.volume.isSilent):n?A(s.settings.volume.isSilent):S(s.settings.volume.isSilent),r&&s.winGame()}}}function St(t){t.grd.lockGrid(),t.grd.cleanX(),t.actions.addDisabled(),t.actions.activeReset(),Ye(t.settings.volume.isSilent),t.openModal("win")}function At(t){t.actions.createActions(),t.actions.solution.el.addEventListener("click",()=>{t.showSolution(),h(t.settings.volume.isSilent,t.isLoad)}),t.actions.reset.el.addEventListener("click",()=>{t.resetGame(),h(t.settings.volume.isSilent,t.isLoad)}),t.actions.save.el.addEventListener("click",()=>{t.saveGame(),h(t.settings.volume.isSilent,t.isLoad)}),t.actions.random.el.addEventListener("click",()=>{t.tmr.timer.isStart?t.openModal("change"):(t.changeId(),h(t.settings.volume.isSilent,t.isLoad))}),t.actions.saved.el.addEventListener("click",()=>{t.selectSaved(),h(t.settings.volume.isSilent,t.isLoad)}),t.wrap.childNodes[1].append(t.actions.save.el),t.wrap.childNodes[1].append(t.actions.reset.el),t.wrap.childNodes[1].append(t.actions.solution.el),t.wrap.childNodes[1].append(t.actions.random.el),t.wrap.childNodes[1].append(t.actions.saved.el)}function Ct(t){t.grd.grid.el.classList.contains("lock")?t.submitResetGame():t.openModal("reset")}function xt(t){t.tmr.cleanTimer(),t.tmr.createTimer(),t.grd.cleanCells(),t.actions.resetGame(),t.grd.grid.el.classList.contains("lock")&&t.grd.lockGrid()}function Tt(t){t.tmr.timer.isStart?t.openModal("solution"):(t.grd.fillScheme(),t.actions.showSolution())}function yt(t){t.grd.lockGrid(),t.tmr.cleanTimer(),t.tmr.createTimer(),t.grd.fillScheme(),t.actions.showSolution()}function Nt(t){t.tmr.timer.isStart=!0,t.tmr.startTimer(!0)}function Mt(t){const e=N();if(e===null||e&&e.grid.join("=")!==t.grd.points.cur.join("=")||e&&e.x.join("=")!==t.grd.points.x.join("=")){const s={lvl:t.lvl.curLevel.value,card:t.crd.curCard.value,grid:t.grd.points.cur,x:t.grd.points.x,timer:t.tmr.timer.sec};ee(s),t.alert.addAlert()}else t.alert.addAlert("not")}function Gt(t){t.top.header.el.childNodes[0].childNodes[0].childNodes[2].innerHTML=`${t.crd.curCard.value}  (${t.lvl.curLevel.value})`}function It(t,e){e.pageSize?(e.pageSize<=767&&t>767&&(e.pageSize=t,e.controls.append(e.lvl.levels.el),e.controls.append(e.crd.cards.el),e.wrap.childNodes[1].insertAdjacentElement("afterbegin",e.tmr.timer.el),e.body.el.classList.contains("burger-open")&&(e.top.burger.el.classList.remove("cog-rotate"),e.top.collapse.el.classList.remove("translateY"),e.body.el.classList.remove("burger-open"),e.content.main.el.removeAttribute("inert"),e.top.collapse.el.classList.remove("show"))),e.pageSize>767&&t<=767&&(e.pageSize=t,e.top.nav.el.childNodes[1].insertAdjacentElement("afterbegin",e.tmr.timer.el),e.top.nav.el.childNodes[3].childNodes[0].append(e.lvl.levels.el),e.top.nav.el.childNodes[3].childNodes[0].append(e.crd.cards.el))):e.pageSize=t}function Et(t){h(t.settings.volume.isSilent,t.isLoad),t.top.collapse.el.classList.contains("show")?(t.top.burger.el.classList.remove("cog-rotate"),t.top.collapse.el.classList.remove("translateY"),setTimeout(()=>{t.body.el.classList.remove("burger-open"),t.content.main.el.removeAttribute("inert"),t.top.collapse.el.classList.remove("show")},300)):(t.top.burger.el.classList.add("cog-rotate"),t.top.collapse.el.classList.add("show"),t.body.el.classList.add("burger-open"),t.content.main.el.setAttribute("inert",!0),setTimeout(()=>{t.top.collapse.el.classList.add("translateY")},300))}function Bt(t){const e=Y();e?(t.body.initBody(e),t.settings.theme.isDark=le(e)):(t.body.initBody("light"),t.settings.theme.isDark=!1),t.pageSize=window.innerWidth,t.top.initNav(),t.content.init(),t.top.burger.el.addEventListener("click",()=>t.toggleCollapse()),t.body.el.append(t.top.header.el),t.body.el.append(t.content.main.el),t.controls=o("div","controls"),t.content.main.el.append(t.controls),t.createSettings(),t.createLevels(),t.alert.create(),t.body.el.append(t.alert.el)}class kt{constructor(e="body"){this.tag=e,this.el=null}getEl(){this.el=document.body}addDataTag(){this.el.setAttribute("data-tag","body")}changeDataTheme(e){this.el.setAttribute("data-bs-theme",e)}initBody(e="light"){this.getEl(),this.addDataTag(),this.changeDataTheme(e);const s=o("div","game-bg");this.el.append(s);const i=o("div","game-bg2");this.el.append(i)}}class Dt extends a{constructor(e,s="button",i="navbar-toggler"){super(),this.tag=s,this.className=i,this.target=e}create(){super.create(),this.el.setAttribute("type","button btn-link"),this.el.setAttribute("data-bs-toggle","collapse"),this.el.setAttribute("data-bs-target",`#${this.target}`),this.el.setAttribute("aria-controls",this.target),this.el.setAttribute("aria-expanded","false"),this.el.setAttribute("aria-label","change nav");const e=He;this.el.innerHTML=e}}class Ot extends a{constructor(e,s="div",i="collapse navbar-collapse"){super(),this.tag=s,this.className=i,this.id=e}create(){super.create(),this.el.setAttribute("id",this.id),this.el.setAttribute("data-bs-theme","dark");const e=o("container","d-flex container-fluid top-controls flex-wrap");this.el.append(e)}}class zt extends a{constructor(e="nav",s="container-fluid mb-2 flex-wrap flex-md-nowrap"){super(),this.tag=e,this.className=s}create(){super.create();const e=o("div","logo-wrap"),s=o("img","logo");s.setAttribute("src",`${m}logo.svg`),s.setAttribute("alt","Logo");const i=o("h1","navbar-brand");i.setAttribute("data-bs-theme","dark"),i.innerText="Nonograms",e.append(s),e.append(i);const l=o("p","game-info mb-0 mr-0");e.append(l);const n=o("div","time-wrap");this.el.append(e),this.el.append(n)}}class Ht{constructor(){this.header=new a("header","navbar navbar-expand-md bd-navbar pb-0 bg-primary sticky-top"),this.burger=new Dt("nav-collapse"),this.collapse=new Ot("nav-collapse"),this.nav=new zt}initNav(){this.header.create(),this.nav.create(),this.burger.create(),this.collapse.create(),this.nav.el.append(this.burger.el),this.nav.el.append(this.collapse.el),this.header.el.append(this.nav.el)}}class Vt{constructor(){this.main=new a("main","container-xxl my-4 my-md-2 bd-layout center")}init(){this.main.create()}}class f extends a{constructor({btnClass:e,trueIcon:s,falseIcon:i}){super(),this.tag="button",this.className=e,this.icon=null,this.trueIcon=s,this.falseIcon=i}changeIcon(e){e?this.icon.innerHTML=this.falseIcon:this.icon.innerHTML=this.trueIcon}create(){super.create(),this.icon=o("div","icon"),this.el.append(this.icon)}}class _t{constructor(){this.volume=new f({btnClass:"volume btn btn-link mx-2",trueIcon:Xe,falseIcon:je}),this.theme=new f({btnClass:"theme btn btn-link mx-2",trueIcon:Je,falseIcon:qe}),this.score=new f({btnClass:"score btn btn-link mx-2",trueIcon:Ke})}changeTheme(){return this.theme.isDark=!this.theme.isDark,this.theme.changeIcon(this.theme.isDark),this.theme.isDark}changeVolume(){return this.volume.isSilent=!this.volume.isSilent,this.volume.changeIcon(this.volume.isSilent),this.volume.isSilent}createSettings(){this.score.create(),this.score.changeIcon(),this.volume.create(),this.volume.changeIcon(this.volume.isSilent),this.theme.create(),this.theme.changeIcon(this.theme.isDark)}}class I extends a{constructor(e,s,i="primary"){super(),this.tag="button",this.className=`${s} btn btn-outline-${i}`,this.el=null,this.id=e}getEl(e){super.create(),this.el.setAttribute("value",this.id),this.el.setAttribute("id",this.id),e&&(this.el.innerHTML=e);const s=o("span","");return s.innerText=this.id,this.el.append(s),this.el}init(e){return this.getEl(e)}}class Rt extends a{constructor(e="div",s="levels"){super(),this.tag=e,this.className=s,this.items=[]}createLevel(e){const i=new I(e.name,"level").init(e.icon);i.classList.add("btn-lg"),this.items.push(i),this.el.append(i)}}class Pt{constructor(){this.curLevel={el:null,value:null},this.levels=new Rt}selectCurLevel(e){let s=!1,i;return e.target?i=e.target.closest(".level"):i=e,i&&(!this.curLevel.value||this.curLevel.value!==i.getAttribute("id").toLowerCase())&&(this.changeLevel(i.getAttribute("id").toLowerCase()),this.levels.items.forEach(l=>{l.classList.contains("btn-primary")&&(l.classList.remove("btn-primary"),l.classList.add("btn-outline-primary"))}),i.classList.add("btn-primary"),i.classList.remove("btn-outline-primary"),s=!0),s}createLevels(){this.levels.names=[{name:"easy",icon:Re},{name:"medium",icon:_e},{name:"hard",icon:Ve}],this.levels.create(),this.levels.names.forEach(e=>{this.levels.createLevel(e)})}changeLevel(e){this.curLevel.value=e}}class Ut extends a{constructor(e="div",s="cards"){super(),this.tag=e,this.className=s,this.items=[]}createCard(e){const i=new I(e.name,"scheme","secondary").init();this.items.push(i),this.el.append(i)}}class $t{constructor(){this.curCard={el:null,value:null},this.cards=new Ut}selectCurCard(e){let s=!1,i;return e.target?i=e.target.closest(".scheme"):i=e,i&&(!this.curCard.value||this.curCard.value!==i.getAttribute("id"))&&(this.changeCard(i.getAttribute("id")),this.cards.items.forEach(l=>{l.classList.contains("btn-secondary")&&(l.classList.remove("btn-secondary"),l.classList.add("btn-outline-secondary"))}),i.classList.add("btn-secondary"),i.classList.remove("btn-outline-secondary"),s=!0),s}cleanCards(){this.cards.el&&(this.cards.el.remove(),this.cards.data=null,this.cards.items=[],this.cards.el="")}createCards(e){e.length&&this.cards.data!==e&&(this.cards.data=e,this.cards.create(),this.cards.data.forEach(s=>{this.cards.createCard(s)}))}changeCard(e){this.curCard.value=e}}class d extends a{constructor(e,s,i){super(),this.tag="button",this.className=s,this.title=e,this.icon=i}create(){super.create();const e=o("span","");e.innerText=this.title[0].toUpperCase()+this.title.slice(1),this.el.innerHTML=this.icon,this.el.append(e)}}class Ft{constructor(){this.save=new d("save game","btn btn-action btn-outline-success",Pe),this.solution=new d("solution","btn btn-action btn-outline-info",Ue),this.reset=new d("reset game","btn btn-action btn-outline-info",Fe),this.random=new d("random game","btn btn-action btn-primary mt-md-3",We),this.saved=new d("continue last game","btn btn-action btn-primary",De)}activateButtons(){this.save.el.removeAttribute("disabled"),this.reset.el.removeAttribute("disabled")}resetGame(){this.addDisabled()}showSolution(){this.addDisabled(),this.activeReset()}addDisabled(){this.save.el.setAttribute("disabled",!0),this.reset.el.setAttribute("disabled",!0)}activeReset(){this.reset.el.removeAttribute("disabled")}removeActions(){this.save.el&&this.save.el.remove(),this.solution.el&&this.solution.el.remove(),this.reset.el&&this.reset.el.remove(),this.saved.el&&this.saved.el.remove(),this.random.el&&this.random.el.remove()}createActions(){this.removeActions(),this.save.create(),this.solution.create(),this.reset.create(),this.random.create(),this.saved.create(),this.addDisabled()}}function C(t){let e=[];t.forEach(i=>{let l=[],n=0;i.forEach((r,c)=>{r.value===!1&&n>0&&(l.push(n),n=0),r.value===!0&&(n+=1),c===i.length-1&&n>0&&(l.push(n),n=0)}),l=l.map(r=>({name:"hint",value:r})),e.push(l.concat(i))});const s=e.map(i=>i.length);return s.sort((i,l)=>l-i),e=e.map(i=>{if(i.length<s[0]){let l=s[0]-i.length;for(;l>0;)i.unshift({name:"hint",value:null}),l-=1}return i}),e}function x(t){const e=t.length,s=t[0].length,i=Array.from({length:s},()=>Array(e).fill(0));for(let l=0;l<e;l+=1)for(let n=0;n<s;n+=1)i[s-1-n][l]=t[l][n];return i}function T(t){const e=t.length,s=t[0].length,i=Array.from({length:s},()=>Array(e).fill(0));for(let l=0;l<e;l+=1)for(let n=0;n<s;n+=1)i[n][e-1-l]=t[l][n];return i}function Wt(t){const e=[];return t.forEach(s=>{const i=s.map(l=>({name:"cell",value:l}));e.push(i)}),e}function Xt(t){return t.map((s,i)=>{let l=s;return(i+1)%5===0&&!s.every(n=>n.name==="hint")&&(l=s.map(n=>{const r=n;return n.border?r.border+=" top":r.border="top",r})),l})}function jt(t){let e=null;return t.map((i,l)=>{let n=i;return l!==0&&(t[+l-1].every(r=>r.name==="hint")&&!i.every(r=>r.name==="hint")||(l-e)%5===0)&&(e=l,n=i.map(r=>{const c=r;return r.border?c.border+=" right":c.border="right",c})),n})}function qt(t){const e=[];return t.map(s=>{const i=s.map(l=>{let n=!1;return l===1&&(n=!0),n});return e.push(i),s}),e}function Jt(t){const e=[...t];let s=qt(e);return s=Wt(s),s=C(s),s=x(s),s=C(s),s=jt(s),s=x(s),s=Xt(s),s=T(s),s=T(s),s}class Kt extends a{constructor(e="div",s="grid-container"){super(),this.tag=e,this.className=s,this.items=[]}create(e,s){if(this.el){let n=this.items.length;for(;n>0;)n-=1,this.items[n].remove()}else super.create(),this.el.classList.add(s);const i=e[0].length;this.el.style.gridTemplateColumns=`repeat(${i}, 1fr)`;const l=[];return e.forEach((n,r)=>{n.forEach((c,p)=>{var b,w;const u=o("div","cell");c.name==="cell"&&(u.setAttribute("name",c.name),u.setAttribute("id",`${r}-${p}`),u.classList.add("game"),c.value&&l.push(`${r}-${p}`)),c.name==="hint"&&(u.innerText=c.value,u.classList.add("hint"),c.value&&u.setAttribute("id",`${r}-${p}`),c.value||u.classList.add("spirit")),(b=c.border)!=null&&b.includes("right")&&u.classList.add("cell-border-right"),(w=c.border)!=null&&w.includes("top")&&u.classList.add("cell-border-top"),this.items.push(u),this.el.appendChild(u)})}),l}}function y(t,e){let s=!1;return t.classList.contains(e)?(t.classList.remove(e),s=!1):(t.classList.add(e),s=!0),s}class Yt{constructor(){this.grid=new Kt,this.points={scheme:[],cur:[],x:[]}}checkX(e){const s=e.getAttribute("id");return this.points.x.includes(s)?this.points.x=this.points.x.filter(i=>i!==s):this.points.x.push(s),this.points.cur.includes(s)&&(this.points.cur=this.points.cur.filter(i=>i!==s)),this.isWin()}checkCell(e){const s=e.getAttribute("id");return this.points.cur.includes(s)?this.points.cur=this.points.cur.filter(i=>i!==s):this.points.cur.push(s),this.points.x.includes(s)&&(this.points.x=this.points.x.filter(i=>i!==s)),this.isWin()}addHover(e){const s=e.target.closest(".game");if(s){const i=s.getAttribute("id").split("-"),l=i[0],n=i[1];this.grid.items.forEach(r=>{if(r.classList.contains("hint")&&r.hasAttribute("id")){const c=r.getAttribute("id").split("-");c[0]===l&&r.classList.add("light"),c[1]===n&&r.classList.add("light")}})}}removeHover(e){const s=e.target.closest(".game");if(s){const i=s.getAttribute("id").split("-"),l=i[0],n=i[1];this.grid.items.forEach(r=>{if(r.classList.contains("hint")&&r.hasAttribute("id")){const c=r.getAttribute("id").split("-");c[0]===l&&r.classList.remove("light"),c[1]===n&&r.classList.remove("light")}})}}isWin(){return this.points.cur.sort().join("=")===this.points.scheme.sort().join("=")}cleanX(){for(const e of this.grid.items)e.classList.contains("x")&&e.classList.remove("x")}selectCell(e,s){let i=null,l=null,n=null;const r=e.target.closest(".cell");return r&&r.hasAttribute("name")&&(s?(r.classList.contains("black")&&r.classList.remove("black"),l=y(r,"x"),n=this.checkX(r)):(r.classList.contains("x")&&r.classList.remove("x"),i=y(r,"black"),n=this.checkCell(r))),{isFill:i,isX:l,isWin:n}}fillScheme(){this.cleanCells(),this.grid.items.forEach(e=>{e.hasAttribute("id")&&this.points.scheme.includes(e.getAttribute("id"))&&e.classList.add("black")})}fillSavedCells(){this.grid.items.forEach(e=>{e.hasAttribute("id")&&this.points.cur.includes(e.getAttribute("id"))&&e.classList.add("black")}),this.grid.items.forEach(e=>{e.hasAttribute("id")&&this.points.x.includes(e.getAttribute("id"))&&e.classList.add("x")})}cleanCells(){this.cleanX(),this.points.cur=[],this.points.x=[];for(const e of this.grid.items)e.classList.contains("black")&&e.classList.remove("black")}cleanGrid(){this.grid.el&&(this.grid.el.remove(),this.grid.el=null,this.grid.items=[],this.grid.matrix=[])}lockGrid(){this.grid.el.classList.toggle("lock")}createGrid(e,s){this.points.scheme=[],this.points.cur=[],this.points.x=[],this.grid.matrix=[],this.grid.matrix=Jt(e.figure),this.grid.el&&this.grid.el.classList.contains("lock")&&this.lockGrid(),this.points.scheme=this.grid.create(this.grid.matrix,s)}}class Qt extends a{constructor(e="div",s="timer"){super(),this.tag=e,this.className=s}create(){this.el||super.create()}}class Zt{constructor(){this.timer=new Qt}addValues(){this.timer.sec=0,this.timer.value="00:00",this.timer.isStart=!1,this.timer.req=null}startTimer(e){let s;e?(s=Date.now(),s=new Date(s).setTime(new Date(s).getTime()-this.timer.sec*1e3)):s=Date.now();const i=()=>{const l=Math.floor((Date.now()-s)/1e3||0);this.timer.sec!==l&&this.changeTimerValue(l),this.timer.req=window.requestAnimationFrame(i)};this.timer.req=i()}changeTimerValue(e){this.timer.sec=e,this.timer.value=new Date(1970,0,0,0,0,+e||0).toLocaleTimeString("ru");const s=this.getTimerValue();this.timer.el.innerText=s}getTimerValue(){let e;return this.timer.value.toString().slice(0,2)==="00"?e=this.timer.value.toString().slice(3):e=this.timer.value,e}pauseTimer(){window.cancelAnimationFrame(this.timer.req)}cleanTimer(){this.pauseTimer(),this.timer.sec=0,this.timer.value="00:00",this.timer.isStart=!1}createTimer(e){this.timer.create(),this.addValues(),this.timer.el.innerText=this.timer.value,e&&(this.timer.sec=+e,this.changeTimerValue(this.timer.sec))}}class es extends a{constructor(e="div",s="modal fade"){super(),this.tag=e,this.className=s,this.title=null,this.p=null,this.backdrop=null,this.cancelBtn=null,this.scoreTable=null,this.scoreBody=null}createScoreTable(){this.scoreTable=o("table","table table-striped");const e=o("thead",""),s=o("tr","");e.append(s),this.scoreTable.append(e),this.createBody();const i=["#","Title","Level","Time"];for(const l of i){const n=o("th","");n.setAttribute("scope","col"),n.innerText=l,l==="Title"&&(n.style="width:50%"),s.append(n)}}createBody(){this.scoreBody=o("tbody",""),this.scoreTable.append(this.scoreBody)}createRow(e){const s=o("tr",""),i=o("th",e.num);i.innerText=e.num;const l=o("td",e.card);l.innerText=e.card;const n=o("td",e.lvl);n.innerText=e.lvl;const r=o("td",e.timer);r.innerText=e.timer,s.append(i),s.append(l),s.append(n),s.append(r),this.scoreBody.append(s)}create(){super.create(),this.createScoreTable(),this.el.setAttribute("data-bs-keyboard","false"),this.el.setAttribute("tabindex","-1"),this.el.setAttribute("aria-modal","true"),this.el.setAttribute("role","dialog"),this.el.style.display="block";const e=o("div","modal-dialog modal-dialog-centered"),s=o("div","modal-content"),i=o("div","modal-header"),l=o("div","modal-body"),n=o("div","modal-footer");this.title=o("h1","modal-title fs-5");const r=o("button","btn-close cls");this.el.setAttribute("data-bs-dismiss","modal"),this.el.setAttribute("aria-label","close"),i.append(this.title),i.append(r),this.p=o("p",""),l.append(this.p);const c=o("button","btn btn-outline-success sbmt");c.innerText="OK",this.cancelBtn=o("button","btn btn-outline-modal-cancel cls invisible"),this.cancelBtn.innerText="Cancel",n.append(c),n.append(this.cancelBtn),s.append(i),s.append(l),s.append(n),e.append(s),this.el.append(e),this.backdrop=o("div","modal-backdrop fade")}}class ts extends es{constructor(e,s){super(),this.title=e,this.text=s,this.win={title:"Great!",text:"You have solved the nonogram in XXX seconds!"},this.solution={title:"Show solution",text:"Once the solution is shown, the current game will be over"},this.reset={title:"Reset game",text:"Everything you selected in the playing field will be erased"},this.change={title:"Change game",text:"Everything you selected in the playing field will be erased"},this.score={title:"Score Table",text:""}}close(){this.backdrop.classList.remove("show"),this.el.classList.remove("show")}fillModal(e,s){if(this.el.setAttribute("data-type",e),e==="win"){let{text:i}=this.win;i=i.replace("XXX",s),this.changeTitle(this.win.title),this.changeText(i),this.cancelBtn.classList.contains("invisible")||this.cancelBtn.classList.add("invisible")}e==="solution"&&(this.changeTitle(this.solution.title),this.changeText(this.solution.text),this.cancelBtn.classList.contains("invisible")&&this.cancelBtn.classList.remove("invisible")),e==="reset"&&(this.changeTitle(this.reset.title),this.changeText(this.reset.text),this.cancelBtn.classList.contains("invisible")&&this.cancelBtn.classList.remove("invisible")),e==="change"&&(this.changeTitle(this.change.title),this.changeText(this.change.text),this.cancelBtn.classList.contains("invisible")&&this.cancelBtn.classList.remove("invisible")),e==="score"&&(this.changeTitle(this.score.title),this.changeText(this.score.text),this.cancelBtn.classList.contains("invisible")||this.cancelBtn.classList.add("invisible"),this.scoreTable.append(this.scoreBody),this.p.append(this.scoreTable))}open(e,s){this.fillModal(e,s),this.backdrop.classList.add("show"),this.el.classList.add("show")}changeTitle(e){this.title.innerText=e}changeText(e){this.p.innerText=e}}class ss extends a{constructor(e="div",s="alerts"){super(),this.tag=e,this.className=s,this.count=0,this.infoIcon=$e,this.warnIcon=Oe,this.sucIcon=ze,this.savedText="Game saved",this.notSavedText="Game was saved earlier",this.tableText="Result added in Score table",this.notGameText="No saved game"}createAlert(e){const s=o("div","alert alert-success d-flex align-items-center alert-dismissible fade");let i=this.infoIcon;const l=o("div","");return e==="score"?(l.innerText=this.tableText,s.className="alert alert-info d-flex align-items-center alert-dismissible fade"):e==="not"?(l.innerText=this.notSavedText,i=this.warnIcon,s.className="alert alert-danger d-flex align-items-center alert-dismissible fade"):e==="noGame"?(l.innerText=this.notGameText,i=this.warnIcon,s.className="alert alert-danger d-flex align-items-center alert-dismissible fade"):(l.innerText=this.savedText,i=this.sucIcon),s.innerHTML=i,s.append(l),s.setAttribute("id",`alert-${this.count}`),this.count+=1,s}addAlert(e){const s=this.createAlert(e);this.el.append(s),setTimeout(()=>{s.classList.add("show"),this.removeAlert(s)},200)}removeAlert(e){setTimeout(()=>{e.classList.remove("show"),setTimeout(()=>{e.remove()},300)},3e3)}create(){super.create()}}class is{constructor(){this.body=new kt,this.top=new Ht,this.content=new Vt,this.settings=new _t,this.lvl=new Pt,this.crd=new $t,this.grd=new Yt,this.tmr=new Zt,this.actions=new Ft,this.modal=new ts,this.alert=new ss,this.changeGameEvt=null,this.passedGames=[],this.randomData=[...g],this.randomId=0,this.isLoad=!1,this.controls=null,this.wrap=null,this.cellTarget=null,this.pageSize=null}fillPassedGames(){nt(this)}changePassedGame(e){rt(e,this)}saveRandomGames(){ot(this)}changeId(){ct(this)}changeData(e){at(e,this)}createSettings(){et(this)}showScore(){const e=re();this.openModal("score",e)}createLevels(){ht(this)}getSpecLevel(e,s){ut(e,s,this)}selectSpecificLevel(e,s){mt(e,s,this)}selectCurLevel(e){dt(e,this)}selectSaved(){gt(this)}createCards(e){vt(e,this)}selectSpecificCard(e){pt(e,this)}selectCurCard(e){ft(e,this)}createGrid(e,s){bt(e,s,this)}fillSavedGame(e,s){wt(e,s,this)}selectCell(e,s){Lt(e,s,this)}winGame(){St(this)}openModal(e,s){st(e,s,this)}closeModal(e){tt(e,this)}close(){it(this)}callActions(e,s){lt(e,s,this)}createTimer(e){this.tmr.cleanTimer(),this.tmr.createTimer(e),this.pageSize>767?this.wrap.childNodes[1].insertAdjacentElement("afterbegin",this.tmr.timer.el):this.top.nav.el.childNodes[1].insertAdjacentElement("afterbegin",this.tmr.timer.el)}createActions(){At(this)}resetGame(){Ct(this)}submitResetGame(){xt(this)}showSolution(){Tt(this)}submitSolution(){yt(this)}cancelTimerPause(){Nt(this)}saveGame(){Mt(this)}changeGameinfo(){Gt(this)}changePageSize(e){It(e,this)}toggleCollapse(){Et(this)}createHtml(){Bt(this)}init(){this.createHtml(),this.fillPassedGames()}}const v=new is;v.init();window.addEventListener("beforeunload",t=>v.saveRandomGames(t));window.addEventListener("load",()=>{v.isLoad=!0});window.addEventListener("resize",t=>{v.changePageSize(t.target.innerWidth)});
